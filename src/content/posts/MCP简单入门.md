---
title: MCPç®€å•å…¥é—¨
published: 2025-08-15
description: 'æœ¬ç¯‡æ˜¯å¤§æ¨¡å‹ä¸­åŸºç¡€çš„MCPå…¥é—¨'
image: 'https://ob-typora.oss-cn-shanghai.aliyuncs.com/images/20250815191802201.png'
tags: [å¤§æ¨¡å‹]
category: 'LLM'
draft: false 
lang: 'zh'
---

# ä¸€ã€å¼•è¨€

## 1.1 ä»€ä¹ˆæ˜¯MCPï¼Ÿ

### å®šä¹‰ä¸æ ¸å¿ƒä»·å€¼ï¼š

MCPï¼ˆModel Context Protocolï¼Œæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰æ˜¯ä¸€ç§å¼€æ”¾æ ‡å‡†åè®®ï¼Œæ—¨åœ¨æ ‡å‡†åŒ–å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸å¤–éƒ¨æ•°æ®æºã€å·¥å…·å’ŒæœåŠ¡ä¹‹é—´çš„äº¤äº’æ–¹å¼ã€‚å…¶æ ¸å¿ƒæ˜¯é€šè¿‡å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ï¼ˆåŒ…æ‹¬MCPä¸»æœºã€MCPå®¢æˆ·ç«¯å’ŒMCPæœåŠ¡å™¨ï¼‰å®ç°å®‰å…¨ã€é«˜æ•ˆçš„é€šä¿¡ï¼Œè®©AIæ¨¡å‹èƒ½å¤ŸåŠ¨æ€è®¿é—®å¤–éƒ¨èµ„æºï¼ˆå¦‚æ–‡ä»¶ã€æ•°æ®åº“ã€APIï¼‰ï¼Œå¹¶æ‰§è¡Œå…·ä½“ä»»åŠ¡ï¼ˆå¦‚æ•°æ®æŸ¥è¯¢ã€å·¥å…·è°ƒç”¨ï¼‰ã€‚

å¹¶ä¸”å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

1. **æ ‡å‡†åŒ–æ¥å£**ï¼šMCPæä¾›ç»Ÿä¸€çš„åè®®ï¼ˆç±»ä¼¼USB-Cæ¥å£ï¼‰ï¼Œç®€åŒ–AIæ¨¡å‹ä¸å¤šæ ·åŒ–å¤–éƒ¨èµ„æºçš„è¿æ¥ï¼Œé¿å…ä¸ºæ¯ä¸ªå·¥å…·å•ç‹¬å¼€å‘å®šåˆ¶é›†æˆã€‚
2. **åŠ¨æ€äº¤äº’èƒ½åŠ›**ï¼šæ”¯æŒåŒå‘å®æ—¶é€šä¿¡ï¼ŒAIæ¨¡å‹å¯ä¸»åŠ¨å‘ç°å·¥å…·ã€æ‹‰å–æ•°æ®æˆ–è§¦å‘æ“ä½œï¼ˆå¦‚å‘é€é‚®ä»¶ã€è°ƒæ•´æ—¥ç¨‹ï¼‰ã€‚
3. **å®‰å…¨å¯æ§**ï¼šé€šè¿‡æƒé™ç®¡ç†å’Œæœ¬åœ°åŒ–æ•°æ®å¤„ç†ï¼Œç¡®ä¿ç”¨æˆ·æ•°æ®éšç§å’Œæ“ä½œå®‰å…¨æ€§ï¼ˆå¦‚ç”¨æˆ·æˆæƒè®¿é—®æœ¬åœ°æ–‡ä»¶ï¼‰ã€‚
4. **ç”Ÿæ€å¼€æ”¾æ€§**ï¼šä½œä¸ºå¼€æºåè®®ï¼ŒMCPæ”¯æŒå¼€å‘è€…æ„å»ºå¯å¤ç”¨çš„MCPæœåŠ¡å™¨ï¼ˆå·¥å…·æä¾›æ–¹ï¼‰å’Œå®¢æˆ·ç«¯ï¼ˆAIåº”ç”¨ï¼‰ï¼Œä¿ƒè¿›å·¥å…·ç”Ÿæ€æ‰©å±•ã€‚

### **é€šç”¨æ¶æ„**

MCP æ ¸å¿ƒé‡‡ç”¨å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ï¼Œä¸»æœºåº”ç”¨å¯ä»¥è¿æ¥å¤šä¸ªæœåŠ¡å™¨

![image.png](https://ob-typora.oss-cn-shanghai.aliyuncs.com/images/20250815191802125.png)

- **MCP Hosts**: å¦‚ Claude Desktopã€IDE æˆ– AI å·¥å…·ï¼Œå¸Œæœ›é€šè¿‡ MCP è®¿é—®æ•°æ®çš„ç¨‹åº
- **MCP Clients**: ç»´æŠ¤ä¸æœåŠ¡å™¨ä¸€å¯¹ä¸€è¿æ¥çš„åè®®å®¢æˆ·ç«¯
- **MCP Servers**: è½»é‡çº§ç¨‹åºï¼Œé€šè¿‡æ ‡å‡†çš„ Model Context Protocol æä¾›ç‰¹å®šèƒ½åŠ›
- **æœ¬åœ°æ•°æ®æº**: MCP æœåŠ¡å™¨å¯å®‰å…¨è®¿é—®çš„è®¡ç®—æœºæ–‡ä»¶ã€æ•°æ®åº“å’ŒæœåŠ¡
- **è¿œç¨‹æœåŠ¡**: MCP æœåŠ¡å™¨å¯è¿æ¥çš„äº’è”ç½‘ä¸Šçš„å¤–éƒ¨ç³»ç»Ÿï¼ˆå¦‚é€šè¿‡ APIs

ç”¨ä¸€å¥è¯å’Œä¸€å¼ å¾ˆç»å…¸çš„å›¾è¡¨ç¤ºï¼š

> *ä¼ ç»ŸAPIå¦‚åŒç»™æ¯ä¸ªç”µå™¨é…ä¸åŒæ’å¤´ï¼Œè€ŒMCPæ˜¯AIä¸–ç•Œçš„â€œä¸‡èƒ½æ’åº§â€*

![image.png](https://ob-typora.oss-cn-shanghai.aliyuncs.com/images/20250815191802201.png)

## 1.2 MCPä¸ä¼ ç»ŸAPIçš„å¯¹æ¯”

MCPï¼ˆModel Context Protocolï¼‰ä¸ä¼ ç»ŸAPIçš„æ ¸å¿ƒå·®å¼‚ä½“ç°åœ¨**è®¾è®¡ç›®æ ‡ã€äº¤äº’æ¨¡å¼ã€å¼€å‘æ•ˆç‡åŠé€‚ç”¨åœºæ™¯**å››ä¸ªæ–¹é¢

### **1. è®¾è®¡ç›®æ ‡ä¸å®šä½**

| **ç»´åº¦**     | **ä¼ ç»ŸAPI**                         | **MCP**                                      |
| ------------ | ----------------------------------- | -------------------------------------------- |
| **æ ¸å¿ƒç›®æ ‡** | å®ç°ç³»ç»Ÿé—´æ•°æ®äº¤æ¢ï¼ˆå¦‚RESTfulæ¥å£ï¼‰ | **ä¸“ä¸ºAIè®¾è®¡**ï¼Œæ”¯æŒæ¨¡å‹ä¸å·¥å…·çš„åŒå‘åŠ¨æ€äº¤äº’ |
| **åè®®æ€§è´¨** | é€šç”¨è§„èŒƒï¼ˆå¦‚OpenAPIï¼‰ï¼Œæ— AIç‰¹å®šä¼˜åŒ– | **AIä¸“ç”¨åè®®**ï¼Œå†…ç½®å·¥å…·ã€èµ„æºã€æç¤ºç­‰AIåŸè¯­ |
| **äº¤äº’ä¸»ä½“** | äººç±»å¼€å‘è€…æˆ–ç¨‹åºè°ƒç”¨                | **AIæ¨¡å‹è‡ªä¸»è°ƒç”¨**ï¼ˆå¦‚Claudeè§¦å‘å·¥å…·æ‰§è¡Œï¼‰   |

### **2. äº¤äº’æ¨¡å¼å¯¹æ¯”**

| **èƒ½åŠ›**       | **ä¼ ç»ŸAPI**                     | **MCP**                                          |
| -------------- | ------------------------------- | ------------------------------------------------ |
| **é€šä¿¡æ–¹å‘**   | å•å‘è¯·æ±‚-å“åº”ï¼ˆå®¢æˆ·ç«¯ä¸»åŠ¨è°ƒç”¨ï¼‰ | **åŒå‘å®æ—¶é€šä¿¡**ï¼ˆServerå¯ä¸»åŠ¨æ¨é€æ›´æ–°ï¼‰         |
| **åŠ¨æ€å‘ç°**   | éœ€é¢„å®šä¹‰æ¥å£æ–‡æ¡£ï¼Œç¡¬ç¼–ç é›†æˆ    | **è¿è¡Œæ—¶åŠ¨æ€å‘ç°å·¥å…·**ï¼ˆAIè‡ªåŠ¨è¯†åˆ«å¯ç”¨åŠŸèƒ½ï¼‰     |
| **ä¸Šä¸‹æ–‡æ„ŸçŸ¥** | æ— å†…ç½®æœºåˆ¶                      | æ”¯æŒ**èµ„æºæ³¨å…¥**ï¼ˆå¦‚å®æ—¶åŠ è½½ç”¨æˆ·æ—¥å†æ•°æ®ï¼‰       |
| **æ‰§è¡Œæµç¨‹**   | å•æ¬¡è°ƒç”¨ï¼Œè¾¹ç•Œæ¸…æ™°              | **å¤šæ­¥éª¤å·¥ä½œæµ**ï¼ˆå¦‚â€œæŸ¥å¤©æ°”â†’è®¢æœºç¥¨â†’å‘é€šçŸ¥â€ä¸²è”ï¼‰ |

### **3. å¼€å‘ä¸ç»´æŠ¤æˆæœ¬**

| **ç¯èŠ‚**       | **ä¼ ç»ŸAPI**                                 | **MCP**                                                      |
| -------------- | ------------------------------------------- | ------------------------------------------------------------ |
| **é›†æˆå·¥ä½œé‡** | æ¯ä¸ªAPIç‹¬ç«‹å¼€å‘ï¼š- è®¤è¯- é”™è¯¯å¤„ç†- æ•°æ®è§£æ | **ä¸€æ¬¡é€‚é…ï¼Œå¤šæ¨¡å‹é€šç”¨**ï¼šMCP Serverå°è£…åŠŸèƒ½ï¼Œä»»ä½•å…¼å®¹MCPçš„AIå‡å¯è°ƒç”¨ |
| **ç”Ÿæ€å¤ç”¨**   | ä¾èµ–å‚å•†SDKï¼Œè·¨å¹³å°å…¼å®¹æ€§å·®                 | **å¼€æºåè®®æ ‡å‡†åŒ–**ï¼šGitHubå·²æœ‰2000+å…±äº«MCP Server            |
| **è¿­ä»£æˆæœ¬**   | æ¥å£å˜æ›´éœ€é‡å†™å®¢æˆ·ç«¯ä»£ç                     | **åŠ¨æ€èƒ½åŠ›åå•†**ï¼šServeråŠŸèƒ½æ›´æ–°ï¼ŒClientè‡ªåŠ¨é€‚é…             |

### **4. å®‰å…¨ä¸æƒé™æ§åˆ¶**

| **ç»´åº¦**     | **ä¼ ç»ŸAPI**                               | **MCP**                                                  |
| ------------ | ----------------------------------------- | -------------------------------------------------------- |
| **è®¤è¯æœºåˆ¶** | ä¾èµ–å¼€å‘è€…å®ç°ï¼ˆå¦‚API Key/OAuthï¼‰         | **æ ‡å‡†åŒ–æˆæƒæµ**ï¼š- ç”¨æˆ·å®æ—¶æ‰¹å‡†æ•æ„Ÿæ“ä½œï¼ˆæ–‡æ¡£40ï¼‰       |
| **æ•°æ®éš”ç¦»** | å…¨é‡æ•°æ®æš´éœ²é£é™©ï¼ˆå¦‚APIè¿”å›å®Œæ•´ç”¨æˆ·ä¿¡æ¯ï¼‰ | **æœ€å°æƒé™åŸåˆ™**ï¼šServeré™å®šæ•°æ®èŒƒå›´ï¼ˆå¦‚ä»…è¿”å›æ‰€éœ€å­—æ®µï¼‰ |
| **æ‰§è¡Œå®‰å…¨** | æ— æ“ä½œç¡®è®¤æœºåˆ¶                            | **æ“ä½œæ‹¦æˆª**ï¼šé«˜å±å·¥å…·ï¼ˆå¦‚åˆ é™¤æ–‡ä»¶ï¼‰éœ€ç”¨æˆ·äºŒæ¬¡ç¡®è®¤       |

### **5. é€‚ç”¨åœºæ™¯æ¨è**

| **åœºæ™¯**           | **æ¨èæ–¹æ¡ˆ** | **åŸå› **                                               |
| ------------------ | ------------ | ------------------------------------------------------ |
| **ç®€å•æ•°æ®æŸ¥è¯¢**   | API          | å•æ¬¡è°ƒç”¨æ— éœ€å¤æ‚äº¤äº’ï¼ˆå¦‚è‚¡ç¥¨ä»·æ ¼æ¥å£ï¼‰                 |
| **AIè‡ªåŠ¨åŒ–å·¥ä½œæµ** | MCP          | éœ€å¤šå·¥å…·ä¸²è”ã€å®æ—¶åé¦ˆï¼ˆå¦‚æ•°æ®åˆ†æâ†’æŠ¥å‘Šç”Ÿæˆâ†’é‚®ä»¶å‘é€ï¼‰ |
| **é«˜å®‰å…¨æ€§æ“ä½œ**   | MCP          | å†…ç½®å®¡æ‰¹æœºåˆ¶ä¿éšœæ•æ„Ÿæ“ä½œï¼ˆå¦‚é“¶è¡Œè½¬è´¦ï¼‰                 |
| **å¿«é€ŸåŸå‹å¼€å‘**   | MCP          | å¤ç”¨å¼€æºMCP Serveré¿å…é‡å¤å¼€å‘ï¼ˆæ–‡æ¡£43ï¼‰               |
| **ä¸¥æ ¼æ€§èƒ½æ§åˆ¶**   | API          | ä½å»¶è¿Ÿåœºæ™¯ï¼ˆå¦‚é«˜é¢‘äº¤æ˜“ï¼‰éœ€ç´§è€¦åˆä¼˜åŒ–                   |

# äºŒã€MCPç®€å•å…¥é—¨

## 2.1 MCPçš„æ ¸å¿ƒæ¦‚å¿µ

### å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„

MCPæ ¸å¿ƒæ˜¯å…¶å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ï¼Œå®ƒæ—¨åœ¨ä¸ºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸å¤–éƒ¨ä¸–ç•Œä¹‹é—´çš„ä¿¡æ¯äº¤æ¢æä¾›ä¸€ä¸ªæ ‡å‡†åŒ–ã€å¯æ‰©å±•çš„æ¡†æ¶ ã€‚è¿™ä¸€æ¶æ„å¹¶éç®€å•çš„å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„äºŒå…ƒå…³ç³»ï¼Œè€Œæ˜¯ä¸€ä¸ªç”±ä¸‰ä¸ªå…³é”®è§’è‰²ç»„æˆçš„â€œä¸‰ä½ä¸€ä½“â€äº¤äº’æ¨¡å‹ï¼šä¸»æœºï¼ˆHostï¼‰ã€å®¢æˆ·ç«¯ï¼ˆClientï¼‰å’ŒæœåŠ¡å™¨ï¼ˆServerï¼‰

| **ç»„ä»¶**                | **è§’è‰²å®šä½**             | **æ ¸å¿ƒåŠŸèƒ½**                                                 | **å®ä¾‹**                                                   |
| ----------------------- | ------------------------ | ------------------------------------------------------------ | ---------------------------------------------------------- |
| **MCPä¸»æœºï¼ˆHostï¼‰**     | ç”¨æˆ·äº¤äº’å…¥å£ï¼Œè¿è¡ŒAIåº”ç”¨ | - ç®¡ç†å®¢æˆ·ç«¯ç”Ÿå‘½å‘¨æœŸ- åè°ƒAIæ¨¡å‹ä¸å·¥å…·è°ƒç”¨- æ‰§è¡Œå®‰å…¨ç­–ç•¥ï¼ˆå¦‚ç”¨æˆ·æˆæƒï¼‰ | Claude Desktopã€Cursor IDEã€èŠå¤©æœºå™¨äºº                     |
| **MCPå®¢æˆ·ç«¯ï¼ˆClientï¼‰** | ä¸»æœºå†…éƒ¨çš„â€œåè®®ä»£ç†â€     | - ä¸æœåŠ¡å™¨å»ºç«‹1:1è¿æ¥- åŠ¨æ€å‘ç°å¯ç”¨å·¥å…·/èµ„æº- è½¬å‘è¯·æ±‚å¹¶è¿”å›ç»“æœç»™AIæ¨¡å‹ | å†…åµŒäºHostä¸­çš„é€šä¿¡æ¨¡å—ï¼ˆå¦‚Claude Desktopå†…ç½®çš„MCP Clientï¼‰ |
| **MCPæœåŠ¡å™¨ï¼ˆServerï¼‰** | èƒ½åŠ›æä¾›è€…ï¼Œè¿æ¥å¤–éƒ¨ç³»ç»Ÿ | - æš´éœ²ä¸‰ç±»èƒ½åŠ›ï¼šÂ â€¢Â **èµ„æºï¼ˆResourcesï¼‰**ï¼šæä¾›åªè¯»æ•°æ®ï¼ˆæ–‡ä»¶ã€APIå“åº”ï¼‰Â â€¢Â **å·¥å…·ï¼ˆToolsï¼‰**ï¼šæ‰§è¡Œæ“ä½œï¼ˆå‘é€é‚®ä»¶ã€Gitæäº¤ï¼‰Â â€¢Â **æç¤ºï¼ˆPromptsï¼‰**ï¼šé¢„å®šä¹‰ä»»åŠ¡æ¨¡æ¿ | æ–‡ä»¶ç³»ç»ŸServerã€GitHub API Serverã€å¤©æ°”é¢„æŠ¥Server          |

### ä¼ è¾“å±‚ä¸é€šä¿¡æ–¹å¼

MCP æ”¯æŒå¤šç§ä¼ è¾“æ–¹å¼ï¼Œä»¥é€‚åº”ä¸åŒçš„åº”ç”¨åœºæ™¯ã€‚æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œä¸»è¦çš„ä¼ è¾“æ–¹å¼åŒ…æ‹¬ï¼š

- **STDIO (æ ‡å‡†è¾“å…¥/è¾“å‡º)**ï¼šè¯¥æ–¹æ³•ä¸»è¦ç”¨äºæœ¬åœ°é›†æˆåœºæ™¯ï¼Œå³ MCP æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯åœ¨åŒä¸€ä¸ªç¯å¢ƒä¸­è¿è¡Œã€‚ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªæ¡Œé¢ AI åº”ç”¨éœ€è¦å®‰å…¨åœ°è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿæ—¶ï¼Œé€šå¸¸ä¼šé€šè¿‡ STDIO æ–¹å¼å¯åŠ¨ä¸€ä¸ªæœ¬åœ° MCP æœåŠ¡å™¨ã€‚è¿™ç§æ–¹å¼é€‚ç”¨äºè½»é‡çº§ã€åŒæ­¥çš„æ¶ˆæ¯ä¼ é€’ã€‚
- **HTTP+SSE (Server-Sent Events)**ï¼šè¿™æ˜¯MCPå®˜æ–¹æ”¯æŒçš„ä¸€ç§é‡è¦ä¼ è¾“æ–¹å¼ï¼Œä¸“ä¸ºè¿œç¨‹é›†æˆè®¾è®¡ã€‚å®¢æˆ·ç«¯é€šè¿‡æ ‡å‡†çš„ HTTP è¯·æ±‚å‘é€æ¶ˆæ¯ï¼Œè€ŒæœåŠ¡å™¨åˆ™åˆ©ç”¨ SSE æŠ€æœ¯å‘å®¢æˆ·ç«¯è¿›è¡Œæµå¼å“åº”å’Œäº‹ä»¶æ¨é€ã€‚è¿™ç§æ–¹å¼èƒ½å¤Ÿæœ‰æ•ˆåœ°å¤„ç†å¤§é‡çš„å¼‚æ­¥ã€äº‹ä»¶é©±åŠ¨çš„è°ƒç”¨ï¼Œæ˜¯å¤§å¤šæ•°ç”Ÿäº§çº§äº‘æœåŠ¡çš„ç†æƒ³é€‰æ‹©ã€‚

## **2.2 MCPçš„å·¥ä½œæµç¨‹**

### **æ ¸å¿ƒåŸç†**

MCPé‡‡ç”¨åŸºäº**JSON-RPC 2.0**çš„è½»é‡çº§é€šä¿¡åè®®ï¼Œå®¢æˆ·ç«¯ï¼ˆå¦‚AIåº”ç”¨ï¼‰ä¸æœåŠ¡å™¨ï¼ˆå·¥å…·/æ•°æ®æºï¼‰é€šè¿‡æ ‡å‡†åŒ–æ¶ˆæ¯æ ¼å¼äº¤äº’ã€‚æµç¨‹å¦‚ä¸‹ï¼š

1. **è¯·æ±‚å‘èµ·**

   - å®¢æˆ·ç«¯å‘é€ç»“æ„åŒ–JSONè¯·æ±‚ï¼ŒåŒ…å«ï¼š

     ```json
     {
       "jsonrpc": "2.0",
       "method": "tools/call",  // æ–¹æ³•åï¼ˆå¦‚è°ƒç”¨å·¥å…·ã€æŸ¥è¯¢æ•°æ®ï¼‰
       "params": {              // å‚æ•°ï¼ˆå·¥å…·åã€è¾“å…¥æ•°æ®ç­‰ï¼‰
         "name": "weather_query",
         "arguments": { "city": "Beijing" }
       },
       "id": 1                 // è¯·æ±‚å”¯ä¸€æ ‡è¯†
     
     ```

   - è¯·æ±‚é€šè¿‡HTTP/WebSocketæˆ–æœ¬åœ°è¿›ç¨‹é€šä¿¡ä¼ è¾“ï¼ˆå¦‚Claude Desktopä½¿ç”¨stdioç®¡é“ï¼‰ã€‚

2. **æœåŠ¡å™¨å¤„ç†**

   - æœåŠ¡å™¨è§£æè¯·æ±‚ï¼ŒéªŒè¯å‚æ•°åˆæ³•æ€§ï¼ˆå¦‚æ£€æŸ¥**`city`**æ˜¯å¦å­˜åœ¨ï¼‰ã€‚
   - æ‰§è¡Œå®é™…æ“ä½œï¼ˆå¦‚è°ƒç”¨å¤©æ°”APIã€æŸ¥è¯¢æ•°æ®åº“ï¼‰ã€‚
   - è‹¥éœ€å¼‚æ­¥å¤„ç†ï¼ˆå¦‚å¤§æ–‡ä»¶è¯»å–ï¼‰ï¼Œè¿”å›**`pending`**çŠ¶æ€å¹¶è½®è¯¢ç»“æœã€‚

3. **å“åº”è¿”å›**

   - æˆåŠŸå“åº”ï¼š

   ```json
   {
     "jsonrpc": "2.0",
     "result": {             // è¿”å›æ•°æ®
       "temperature": "25Â°C",
       "humidity": "60%"
     },
     "id": 1
   }
   ```

   - é”™è¯¯å“åº”ï¼š

   ```json
   {
     "jsonrpc": "2.0",
     "error": {
       "code": -32601,       // æ ‡å‡†é”™è¯¯ç ï¼ˆå¦‚æ–¹æ³•ä¸å­˜åœ¨ï¼‰
       "message": "Tool not found"
     },
     "id": 1
   }
   ```

**å…³é”®ç‰¹æ€§**

- **å¹‚ç­‰æ€§**ï¼šç›¸åŒè¯·æ±‚å¤šæ¬¡æ‰§è¡Œç»“æœä¸€è‡´ï¼ˆå¦‚æŸ¥è¯¢æ“ä½œï¼‰ã€‚
- **çŠ¶æ€ç®¡ç†**ï¼šé€šè¿‡**`id`**åŒ¹é…è¯·æ±‚ä¸å“åº”ï¼Œé¿å…ä¹±åºé—®é¢˜ã€‚
- **ä¼ è¾“å±‚æ— å…³**ï¼šæ”¯æŒHTTPã€WebSocketã€gRPCç­‰å¤šç§åè®®ï¼ˆå‚è€ƒ[**Model Context Protocolå®˜æ–¹æ–‡æ¡£**](https://modelcontextprotocol.io/)ï¼‰ã€‚

### **å·¥å…·è°ƒç”¨ä¸æ•°æ®äº¤äº’æµç¨‹**

**å®Œæ•´äº¤äº’é“¾è·¯**

ä»¥â€œAIæŸ¥è¯¢æ•°æ®åº“å¹¶è¿”å›ç»“æœâ€ä¸ºä¾‹

![image.png](https://ob-typora.oss-cn-shanghai.aliyuncs.com/images/20250815191802240.png)

# ä¸‰ã€MCPçš„ä½¿ç”¨æŒ‡å—

## 3.1 ç¯å¢ƒå‡†å¤‡

### å¿…è¦å·¥å…·ä¸ä¾èµ–ï¼ˆNode.jsã€Pythonç­‰ï¼‰

[Node.js](https://nodejs.org/en/download/)

[Python](https://www.python.org/downloads/)

### å¸¸è§MCPå®¢æˆ·ç«¯

1. [Claude-code](https://docs.anthropic.com/zh-CN/docs/claude-code/overview)
2. [Claude Desktop](https://claude.ai/download)
3. [Cherry Studio](https://www.cherry-ai.com/)
4. [cursor](https://cursor.com/cn)

## 3.2 å¿«é€Ÿä¸Šæ‰‹ï¼šMCPçš„ç®€å•ä½¿ç”¨

### **STDIO (æ ‡å‡†è¾“å…¥/è¾“å‡º) çš„ä½¿ç”¨**

è¯¥æ–¹æ³•ä¸»è¦ç”¨äºæœ¬åœ°é›†æˆåœºæ™¯ï¼Œå³ MCP æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯åœ¨åŒä¸€ä¸ªç¯å¢ƒä¸­è¿è¡Œ ã€‚ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªæ¡Œé¢ AI åº”ç”¨éœ€è¦å®‰å…¨åœ°è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿæ—¶ï¼Œé€šå¸¸ä¼šé€šè¿‡ STDIO æ–¹å¼å¯åŠ¨ä¸€ä¸ªæœ¬åœ° MCP æœåŠ¡å™¨ ã€‚è¿™ç§æ–¹å¼é€‚ç”¨äºè½»é‡çº§ã€åŒæ­¥çš„æ¶ˆæ¯ä¼ é€’ ã€‚

1. é…ç½®mcpçš„python-sdk

[python-sdk](https://github.com/modelcontextprotocol/python-sdk)

æ ¹æ®æç¤ºä¸€æ­¥ä¸€æ­¥å®‰è£…uvç­‰é…ç½®

```bash
mkdir mcp-server-demo # åˆ›å»º mcp-server-demo ç›®å½•
uv init mcp-server-demo
cd mcp-server-demo
uv add "mcp[cli]" # å®‰è£…mcpçš„SDK
```

ç„¶åä½¿ç”¨IDEæ‰“å¼€mcp-server-demoç›®å½•å°±ä¼šå‘ç°å·²ç»é…ç½®å¥½äº†

![image.png](https://ob-typora.oss-cn-shanghai.aliyuncs.com/images/20250815191802253.png)

2. åˆ›å»ºä¸€ä¸ªç®€å•çš„ MCP æœåŠ¡å™¨ï¼Œå®ƒæä¾›è®¡ç®—å·¥å…·å’Œä¸€äº›æ•°æ®ï¼Œè¿™é‡Œä¾æ—§ä½¿ç”¨å®˜æ–¹ç»™å‡ºçš„demoï¼Œæœ€åä¸è¦å¿˜äº†åœ¨æœ€åæ·»åŠ ä¸»ç¨‹åºå…¥å£ç‚¹

```bash
"""
FastMCP quickstart example.

cd to the `examples/snippets/clients` directory and run:
    uv run server fastmcp_quickstart stdio
"""

from mcp.server.fastmcp import FastMCP

# Create an MCP server
mcp = FastMCP("Demo")

# Add an addition tool
@mcp.tool()
def add(a: int, b: int) -> int:
    """Add two numbers"""
    return a + b

# Add a dynamic greeting resource
@mcp.resource("greeting://{name}")
def get_greeting(name: str) -> str:
    """Get a personalized greeting"""
    return f"Hello, {name}!"

# Add a prompt
@mcp.prompt()
def greet_user(name: str, style: str = "friendly") -> str:
    """Generate a greeting prompt"""
    styles = {
        "friendly": "Please write a warm, friendly greeting",
        "formal": "Please write a formal, professional greeting",
        "casual": "Please write a casual, relaxed greeting",
    }

    return f"{styles.get(style, styles['friendly'])} for someone named {name}."

# æ·»åŠ ä¸»ç¨‹åºå…¥å£ç‚¹
if __name__ == "__main__":
    # å¯åŠ¨æœåŠ¡å™¨ï¼Œä½¿ç”¨æ ‡å‡†è¾“å…¥/è¾“å‡ºä½œä¸ºé€šä¿¡é€šé“
    mcp.run(transport="stdio")

```

3. ä½¿ç”¨stdioå®¢æˆ·ç«¯æµ‹è¯•mcp

è¿™é‡Œä½¿ç”¨çš„å®¢æˆ·ç«¯æ˜¯Cherry Studio

é€‰æ‹©MCPæœåŠ¡å™¨ï¼Œç‚¹å‡»å¿«é€Ÿåˆ›å»º

![image.png](https://ob-typora.oss-cn-shanghai.aliyuncs.com/images/20250815191802168.png)

åˆ†åˆ«åœ¨ç±»å‹é€‰æ‹©ï¼šstdioï¼Œå‘½ä»¤ä½¿ç”¨ï¼šuv

![image.png](https://ob-typora.oss-cn-shanghai.aliyuncs.com/images/20250815191802180.png)

å‚æ•°å¡«ä»¥ä¸‹ï¼ˆæ³¨æ„<your_path>éœ€è¦å¡«å†™ä½ è‡ªå·±çš„è·¯å¾„:

```bash
--directory
/<your_path>/mcp-server-demo
run
main.py
```

ç„¶åä¿å­˜åä½¿ç”¨å¤§æ¨¡å‹è°ƒç”¨mcpæœåŠ¡

![image.png](https://ob-typora.oss-cn-shanghai.aliyuncs.com/images/20250815191803069.png)

![image.png](https://ob-typora.oss-cn-shanghai.aliyuncs.com/images/20250815191803105.png)

å¦å¤–ä¸€ä¸ªmcpæˆ‘ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªå¼€æºçš„mcpæœåŠ¡å™¨ï¼Œ [VirusTotal MCP Server](https://github.com/yxdm02/mcp-virusTotal-threat-analysis/tree/main?tab=readme-ov-file)ï¼Œæ˜¯ä¸€ä¸ªè®©AIç»“åˆå¨èƒæƒ…æŠ¥è¿›è¡Œæ·±å…¥åˆ†æã€åŸºäº Model Context Protocol (MCP) å¼€å‘çš„ VirusTotal API è°ƒç”¨å·¥å…·ï¼Œä¸ºç”¨æˆ·æä¾›æ–‡ä»¶ã€IPåœ°å€ã€åŸŸåå’ŒURLçš„å¨èƒæƒ…æŠ¥æŸ¥è¯¢åŠŸèƒ½ï¼Œå¹¶å°†å¾—åˆ°çš„æ•°æ®å–‚ç»™AIè¿›è¡ŒäºŒæ¬¡åˆ†æï¼Œæå‡å¨èƒæƒ…æŠ¥åˆ†æèƒ½åŠ›å¹¶ç»™äºˆå¤„ç½®å»ºè®®ã€‚

ä»githubæŠŠé¡¹ç›®æ‹‰åˆ°æœ¬åœ°ï¼Œç„¶åæ ¹æ®æç¤ºå¡«å†™å¥½å¯¹åº”çš„api_keyå°±å¥½ã€‚

å®ç°æ•ˆæœå¦‚ä¸‹ï¼š

> 
>
>
> æˆ‘æ¥å¸®æ‚¨æŸ¥è¯¢IPåœ°å€146.190.70.24çš„ç‰©ç†ä½ç½®ï¼Œå¹¶åˆ†ææ˜¯å¦ä¸ºæ¶æ„IPã€‚
>
> é¦–å…ˆæŸ¥è¯¢IPåœ°å€çš„ç‰©ç†ä½ç½®ï¼š
>
> ç°åœ¨è®©æˆ‘æŸ¥è¯¢è¿™ä¸ªIPåœ°å€çš„ä¿¡èª‰ä¿¡æ¯ï¼Œåˆ†ææ˜¯å¦ä¸ºæ¶æ„IPï¼š
>
> ![image.png](https://ob-typora.oss-cn-shanghai.aliyuncs.com/images/20250815191803148.png)
>
> ç°åœ¨è®©æˆ‘å¯¹è¿™ä¸ªIPåœ°å€è¿›è¡Œæ›´æ·±å…¥çš„é£é™©åˆ†æï¼ŒåŒ…æ‹¬é£é™©ç”»åƒå’Œèº«ä»½éªŒè¯ï¼š
>
> æ ¹æ®æŸ¥è¯¢ç»“æœï¼Œæˆ‘æ¥ä¸ºæ‚¨è¯¦ç»†åˆ†æIPåœ°å€146.190.70.24çš„ç‰©ç†ä½ç½®å’Œå®‰å…¨æ€§ï¼š
>
> ## ğŸ“ ç‰©ç†ä½ç½®ä¿¡æ¯
>
> **åŸºæœ¬ä¿¡æ¯ï¼š**
>
> - **IPåœ°å€**: 146.190.70.24
> - **å¤§æ´²**: åŒ—ç¾æ´²
> - **å›½å®¶**: ç¾å›½
> - **å·/çœ**: æ–°æ³½è¥¿å·
> - **åŸå¸‚**: åŒ—ä¼¯æ ¹ (North Bergen)
> - **é‚®ç¼–**: 07047
> - **æ—¶åŒº**: UTC-5
> - **ç»çº¬åº¦**: 40.804267, -74.012084
> - **å®šä½ç²¾åº¦**: åŸå¸‚çº§
>
> **ç½‘ç»œä¿¡æ¯ï¼š**
>
> - **æ‰€å±æœºæ„**: DigitalOcean, LLC
> - **äº’è”ç½‘æœåŠ¡æä¾›å•†**: DigitalOcean, LLC
> - **è‡ªæ²»ç³»ç»Ÿå·**: 14061
> - **æ•°æ®æ¥æº**: æ•°æ®æŒ–æ˜
>
> ---
>
> ## ğŸ”’ å®‰å…¨ä¿¡èª‰åˆ†æ
>
> ### æ¶æ„æ£€æµ‹ç»“æœ
>
> æ ¹æ®VirusTotalçš„å¤šå¼•æ“æ‰«æç»“æœï¼š
>
> **æ€»ä½“ç»Ÿè®¡ï¼š**
>
> - ğŸ”´ **æ¶æ„**: 6ä¸ªå¼•æ“æ£€æµ‹
> - ğŸŸ¡ **å¯ç–‘**: 3ä¸ªå¼•æ“æ£€æµ‹
> - ğŸŸ¢ **æ— å®³**: 56ä¸ªå¼•æ“æ£€æµ‹
> - âšª **æœªæ£€æµ‹**: 29ä¸ªå¼•æ“
> - â° **è¶…æ—¶**: 0ä¸ªå¼•æ“
>
> ### æ£€æµ‹åˆ°å¨èƒçš„å¼•æ“è¯¦æƒ…
>
> ### ğŸ”´ æ¶æ„æ£€æµ‹ (6ä¸ªå¼•æ“)
>
> 1. **Criminal IP** - æ£€æµ‹ä¸º"malicious"
> 2. **ArcSight Threat Intelligence** - æ£€æµ‹ä¸º"malware"ï¼ˆæ¶æ„è½¯ä»¶ï¼‰
> 3. **Cyble** - æ£€æµ‹ä¸º"malicious"
> 4. **CyRadar** - æ£€æµ‹ä¸º"malicious"
> 5. **Fortinet** - æ£€æµ‹ä¸º"malware"ï¼ˆæ¶æ„è½¯ä»¶ï¼‰
> 6. **SOCRadar** - æ£€æµ‹ä¸º"malware"ï¼ˆæ¶æ„è½¯ä»¶ï¼‰
>
> ### ğŸŸ¡ å¯ç–‘æ£€æµ‹ (3ä¸ªå¼•æ“)
>
> 1. [**alphaMountain.ai**](http://alphamountain.ai/) - æ£€æµ‹ä¸º"suspicious"
> 2. **AlphaSOC** - æ£€æµ‹ä¸º"suspicious"
> 3. **Gridinsoft** - æ£€æµ‹ä¸º"suspicious"
>
> ### ğŸŸ¢ ä¸»è¦å®‰å…¨å¼•æ“æ£€æµ‹ç»“æœ
>
> å¤§å¤šæ•°çŸ¥åå®‰å…¨å¼•æ“å°†å…¶æ ‡è®°ä¸ºå®‰å…¨ï¼ŒåŒ…æ‹¬ï¼š
>
> - **Acronis**: clean
> - **BitDefender**: clean
> - **ESET**: clean
> - **Google Safebrowsing**: clean
> - **Kaspersky**: unrated (æœªè¯„çº§)
> - **Sophos**: clean
> - **TrendMicro**: clean
> - **Microsoft**: clean
> - **Fortinet**: malware (æ£€æµ‹ä¸ºæ¶æ„)
>
> ---
>
> ## ğŸš¨ ç»¼åˆé£é™©è¯„ä¼°
>
> ### é£é™©ç­‰çº§ï¼š**é«˜é£é™©**
>
> ### åˆ¤æ–­ä¾æ®ï¼š
>
> ### âš ï¸ é«˜é£é™©å› ç´ 
>
> 1. **å¤šä¸ªæƒå¨å¼•æ“æ£€æµ‹ä¸ºæ¶æ„**ï¼š
>    - Fortinetã€ArcSightã€SOCRadarç­‰çŸ¥åå®‰å…¨å‚å•†éƒ½æ£€æµ‹ä¸ºæ¶æ„è½¯ä»¶
>    - å…±6ä¸ªå¼•æ“æ ‡è®°ä¸ºæ¶æ„ï¼Œæ¯”ä¾‹è¾ƒé«˜
> 2. **äº‘æœåŠ¡å•†IPè¢«æ»¥ç”¨**ï¼š
>    - å±äºDigitalOceanï¼ˆçŸ¥åäº‘æœåŠ¡æä¾›å•†ï¼‰
>    - äº‘æœåŠ¡å™¨IPç»å¸¸è¢«é»‘å®¢ç§Ÿç”¨è¿›è¡Œæ¶æ„æ´»åŠ¨
> 3. **æ¶æ„æ´»åŠ¨å¤šæ ·æ€§**ï¼š
>    - æ£€æµ‹ç»“æœåŒ…æ‹¬"malicious"ã€"malware"ç­‰å¤šç§æ¶æ„ç±»å‹
>    - è¡¨æ˜å¯èƒ½æ¶‰åŠå¤šç§æ¶æ„æ´»åŠ¨
>
> ### ğŸ“Š é£é™©è¯„åˆ†
>
> - **VirusTotalä¿¡èª‰åˆ†æ•°**: 0ï¼ˆä½ä¿¡èª‰ï¼‰
> - **æ¶æ„æ£€æµ‹ç‡**: 6.7% (6/94)
> - **å¯ç–‘æ£€æµ‹ç‡**: 3.2% (3/94)
> - **æ€»ä½“é£é™©**: ä¸­é«˜é£é™©
>
> ---
>
> ## ğŸ’¡ å»ºè®®æªæ–½
>
> ### ğŸš« ç«‹å³è¡ŒåŠ¨
>
> 1. **é˜»æ­¢è®¿é—®**ï¼šå»ºè®®åœ¨é˜²ç«å¢™ä¸­é˜»æ­¢æ­¤IPè®¿é—®æ‚¨çš„ç½‘ç»œ
> 2. **ç›‘æ§æ—¥å¿—**ï¼šæ£€æŸ¥æ˜¯å¦æœ‰æ¥è‡ªæ­¤IPçš„å¯ç–‘æ´»åŠ¨è®°å½•
> 3. **å®‰å…¨åŠ å›º**ï¼šæ£€æŸ¥å¯èƒ½è¢«æ­¤IPæ”»å‡»çš„ç³»ç»Ÿå’ŒæœåŠ¡
>
> ### ğŸ” è¿›ä¸€æ­¥è°ƒæŸ¥
>
> 1. **è”ç³»DigitalOcean**ï¼šå¯ä»¥é€šè¿‡abuse@digitalocean.comæŠ¥å‘Šæ­¤IPçš„æ¶æ„æ´»åŠ¨
> 2. **å¨èƒæƒ…æŠ¥**ï¼šæ”¶é›†æ›´å¤šå…³äºæ­¤IPçš„å¨èƒæƒ…æŠ¥ä¿¡æ¯
> 3. **è¡Œä¸ºåˆ†æ**ï¼šåˆ†ææ­¤IPçš„è¡Œä¸ºæ¨¡å¼ï¼Œç¡®å®šæ”»å‡»ç±»å‹
>
> ### ğŸ›¡ï¸ é•¿æœŸé˜²æŠ¤
>
> 1. **IPä¿¡èª‰ç®¡ç†**ï¼šå»ºç«‹IPä¿¡èª‰é»‘åå•æœºåˆ¶
> 2. **äº‘æœåŠ¡ç›‘æ§**ï¼šåŠ å¼ºå¯¹æ¥è‡ªäº‘æœåŠ¡å•†IPçš„ç›‘æ§
> 3. **å®æ—¶å¨èƒæ£€æµ‹**ï¼šéƒ¨ç½²å®æ—¶å¨èƒæ£€æµ‹ç³»ç»Ÿ
>
> ---
>
> ## ğŸ“‹ ç»“è®º
>
> **IPåœ°å€146.190.70.24è¢«è¯„ä¼°ä¸ºé«˜é£é™©æ¶æ„IPï¼Œä¸»è¦åŸå› æ˜¯ï¼š**
>
> 1. **åœ°ç†ä½ç½®**ï¼šä½äºç¾å›½æ–°æ³½è¥¿å·çš„DigitalOceanäº‘æœåŠ¡å™¨
> 2. **å®‰å…¨ä¿¡èª‰**ï¼šè¢«6ä¸ªæƒå¨å®‰å…¨å¼•æ“æ£€æµ‹ä¸ºæ¶æ„ï¼Œ3ä¸ªæ£€æµ‹ä¸ºå¯ç–‘
> 3. **é£é™©ç‰¹å¾**ï¼šäº‘æœåŠ¡å™¨IPè¢«å¹¿æ³›ç”¨äºæ¶æ„è½¯ä»¶åˆ†å‘å’Œå…¶ä»–ç½‘ç»œæ”»å‡»æ´»åŠ¨
> 4. **å»ºè®®å¤„ç½®**ï¼šç«‹å³é˜»æ­¢æ­¤IPè®¿é—®ï¼Œå¹¶è¿›è¡Œè¿›ä¸€æ­¥çš„å®‰å…¨è°ƒæŸ¥
>
> **å¼ºçƒˆå»ºè®®å°†æ­¤IPåˆ—å…¥é»‘åå•ï¼Œå¹¶é‡‡å–ç›¸åº”çš„å®‰å…¨é˜²æŠ¤æªæ–½ã€‚**

### **SSEï¼ˆServer-Sent Eventsï¼‰çš„ä½¿ç”¨**

1. å®¢æˆ·ç«¯

ä¾æ—§ä½¿ç”¨çš„æ˜¯Cherry Studioï¼Œåœ¨è®¾ç½®å¤„çš„mcpè®¾ç½®å¯ä»¥ä½¿ç”¨åŒæ­¥æœåŠ¡å™¨ã€‚

![image.png](https://ob-typora.oss-cn-shanghai.aliyuncs.com/images/20250815191803191.png)

å¯ä»¥é€‰æ‹©ä¸åŒçš„æœåŠ¡æä¾›å•†ï¼Œåªéœ€é…ç½®å¥½ç›¸åº”çš„APIå³å¯

![image.png](https://ob-typora.oss-cn-shanghai.aliyuncs.com/images/20250815191803227.png)

2. MCPæœåŠ¡å™¨

è¿™é‡Œä½¿ç”¨çš„æ˜¯ [åŸƒæ–‡IPå®šä½MCP](https://www.modelscope.cn/mcp/servers/@ipfred/aiwen-mcp-server-geoip)ï¼Œé…ç½®å¥½ç›¸åº”çš„keyå³å¯

![image.png](https://ob-typora.oss-cn-shanghai.aliyuncs.com/images/20250815191803282.png)

ç„¶ååœ¨Cherry Studioå³å¯åŒæ­¥ç›¸åº”çš„mcpæœåŠ¡ï¼Œç®€å•æ˜“ä¸Šæ‰‹

![image.png](https://ob-typora.oss-cn-shanghai.aliyuncs.com/images/20250815191803765.png)

æµ‹è¯•ä¸€ä¸‹æ•ˆæœ

![image.png](https://ob-typora.oss-cn-shanghai.aliyuncs.com/images/20250815191803822.png)



# å‚è€ƒæ¥æº

1. [MCPä¸­æ–‡æ–‡æ¡£](https://mcp-docs.cn/introduction)
2. [Model Context Protocolå®˜æ–¹æ–‡æ¡£](https://modelcontextprotocol.io/docs/getting-started/intro)
3. https://github.com/modelcontextprotocol
4. https://github.com/NAXG/ThreatMCP
5. https://github.com/modelcontextprotocol/python-sdk
6. https://github.com/yxdm02/mcp-virusTotal-threat-analysis/tree/main?tab=readme-ov-file
7. https://www.modelscope.cn/mcp
